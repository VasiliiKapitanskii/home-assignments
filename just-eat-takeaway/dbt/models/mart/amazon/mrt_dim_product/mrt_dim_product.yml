version: 2

models:
  - name: mrt_dim_product
    description: Dimensional table with amazon products.

    config:
      alias: dim_product
      materialized: incremental
      order_by: product_id
      unique_key: product_id
      tags:
        - test

    columns:

      - name: _meta_loaded_at
        description: "Timestamp of the data load."

      - name: product_id
        description: "Amazon Standard Identification Number (ASIN) of the product, e.g.: B00004SR8Z"
        data_tests:
          - unique
          - not_null

      - name: sales_rank
        description: "Sales rank of the product by category, e.g.: {'Clothing': 1631}"

      - name: image_url
        description: "URL of the product image, e.g.: http://ecx.images-amazon.com/images/I/41RfWLMDFWL._SY445_.jpg"
        data_tests:
          - not_null

      - name: category_names
        description: "Array of category names that the product belongs to, e.g.: ['Clothing, Shoes & Jewelry']"

      - name: title
        description: "Title of the product, e.g.: Lewis N. Clark Deluxe Neck Stash"

      - name: description
        description: "Description of the product"

      - name: price
        description: "Price of the product in USD, e.g.: 12.8"

      - name: related
        description: "Products related to this item, including also_bought and also_viewed, e.g.: {'also_bought': ['B004RJWFDU'], 'also_viewed': ['B00920ZC3Y']}"

      - name: brand_id
        description: "ID of the brand, MD5 of its name"
